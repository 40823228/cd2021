<h1>首頁</h1>
<p>小組組員:40823204 40823220 40823228 40823242</p>
<p>個人倉儲:<a href="https://github.com/40823228/cd2021">https://github.com/40823228/cd2021</a></p>
<p>二人小組網站:<a href="https://40823228.github.io/stage1-bg14/content/index.html">https://40823228.github.io/stage1-bg14/content/index.html</a></p>
<p>四人小組網站:<a href="https://40823228.github.io/stage1-bg14/content/index.html">https://40823204.github.io/stage2-bg14/content/index.html</a></p>
<p><span>八人小組倉儲:<a href="https://github.com/40823221/stage3-bg5">https://github.com/40823221/stage3-bg5</a></span></p>
<p>二人小組倉儲:<a href="https://github.com/40823228/stage1-bg14">https://github.com/40823228/stage1-bg14</a></p>
<p>四人小組倉儲:<a href="https://40823204.github.io/stage2-bg14/content/index.html" rel="nofollow">https://40823204.github.io/stage2-bg14/content/index.html</a></p>
<p>八人小組倉儲:<a href="https://40823221.github.io/stage3-bg5/content/index.html">https://40823221.github.io/stage3-bg5/content/index.html</a></p>
<h1>Stage1 進度</h1>
<p>分工:40823228(成品零件繪製、模擬，報告影片)</p>
<p>        <span>40823242(初稿零件繪製、模擬，報告影片)</span></p>
<p>進度表:W1 架設網站 討論主題<br/>           W2 初稿完成 修改並討論<br/>           W3 油壓升降平台<br/>           W4 報告和彩現圖</p>
<h2>專題動機</h2>
<p>在工地裡,經常需要在高處實施作業,可是目前在外面看到的作業平台都是用組裝式的,不僅延長工作時間,在搭建過程,也有極大的掉落風險,所以我們小組設計出”油壓式升降平台”,不僅方便攜帶,也大幅減少風險與搭建平台的作業時間。</p>
<p><img caption="false" height="401" src="/images/鷹架1.jpg" width="300"/>拆卸式鷹架(一)<img alt="" height="396" src="/images/鷹架2.jpg" width="300"/><span>拆卸式</span><span>鷹架(二)</span></p>
<p><a href="https://www.google.com/search?q=%E7%A7%BB%E5%8B%95%E5%BC%8F%E9%B7%B9%E6%9E%B6&amp;">圖片資料來源</a></p>
<h2>W1 架設網站 討論主題</h2>
<p>3/3第一次討論</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/uHi0mH8i3Rg" width="560"></iframe></p>
<p>因為第一次討論主題與他組雷同，故修改為"升降平台"</p>
<p>3/5第二次討論</p>
<p><img alt="" height="292" src="/images/討論.PNG" width="849"/></p>
<p>3/10第三次討論</p>
<p>經過討論與參考相關資料後 繪製出"升降平台"初稿</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/AiP_2jZMO80" width="500"></iframe></p>
<h2>W2 初稿完成並討論</h2>
<p>升降平台初稿模擬影片 使用SolidWorks2017繪製 <a href="https://drive.google.com/drive/folders/1dxmB1RXDmzul0oI-K61uC-6H9FfOmbrW?usp=sharing">檔案下載</a></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/10wQ4C1NgjI" width="500"></iframe></p>
<p><img alt="" height="270" src="/images/Hnet-image.gif" width="500"/></p>
<p><img caption="false" height="266" src="/images/1.PNG" width="500"/>等角圖</p>
<p><img caption="false" height="270" src="/images/2.PNG" width="500"/><span>前視圖</span><img caption="false" height="273" src="/images/3.PNG" width="500"/><span>右視圖</span></p>
<p><span>討論:在畫完小組專題”升降平台”之後,發現初稿的作動方式,好像有點單調,經過小組的討論之後,想了其他幾種作動方式,例如: 油壓式、齒輪式、皮帶輪式等等,而我們最終選擇油壓式,因為油壓可以提供非常大的力量,不僅承重能力提升,也使此裝置更為安全 !</span></p>
<h2>W3 油壓升降平台</h2>
<p><span>油壓升降平台模擬影片 使用SolidWorks2017繪製 <a href="https://drive.google.com/file/d/1pPXOeZ0685GNoJnwOglVM_SqeqVwaehe/view?usp=sharing">檔案下載</a></span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/Jw_C1n5aQgo" width="500"></iframe></span></p>
<p><span><img alt="" height="270" src="/images/Hnet.com-image (3).gif" width="500"/></span></p>
<p><span><img alt="" height="349" src="/images/成品前.png" width="500"/>前視圖</span></p>
<p><span></span></p>
<p><span><img alt="" height="363" src="/images/成品右.png" width="500"/>右視圖</span></p>
<p><span></span></p>
<p><span><img alt="" height="346" src="/images/成品上.png" width="500"/>上視圖</span></p>
<p><span>討論:經過初稿模擬測試之後,在這次的版本,使用了油壓式的作動方式,解決了在初稿略顯單調且裝置不安全的問題 !</span></p>
<h2>W4 報告和彩現圖</h2>
<p>專題題目 : 升降平台 <span>使用SolidWorks2017繪製 </span><a href="https://drive.google.com/file/d/1pPXOeZ0685GNoJnwOglVM_SqeqVwaehe/view?usp=sharing">檔案下載</a></p>
<p>影片報告:<iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/YmIuzYPQrWE" width="550"></iframe></p>
<p>彩現圖:</p>
<p><img alt="" height="386" src="/images/彩現2.JPG" width="500"/></p>
<p></p>
<p><img alt="" height="234" src="/images/彩現1.JPG" width="500"/></p>
<p></p>
<p><img alt="" height="234" src="/images/彩現4.JPG" width="500"/></p>
<h2>心得和PDF檔案</h2>
<h4>心得:</h4>
<h4>這次的協同產品設計的前四周是採取二人分組，因為剛接觸協同產品設計，所以在各項作業上都有一定的陌生，不過隨著討論次數的增加，也越來越上手，這次的分組專題讓我體會到如果用傳統的開會討論，肯定會耗費更多的時間，所以接下來的四人小組、八人小組，如果工作分配得宜的話，一定可以創造更有價值性的產品。</h4>
<p><a href="https://drive.google.com/file/d/1Y83VGGkDXYSVAEIbtm2EjOc9-7odPcu2/view?usp=sharing">PDF檔案下載</a></p>
<p><span></span></p>
<h1>Stage2 進度</h1>
<h2>W5 各組影片報告長度</h2>
<p><a href="https://docs.google.com/spreadsheets/d/1mbwlWXTkDt52KyRYIKoxM56mh-rzXe8mSMA--qKP2tY/edit?usp=sharing"></a></p>
<p><iframe frameborder="0" height="390" marginheight="0" marginwidth="0" src="https://docs.google.com/spreadsheets/d/1mbwlWXTkDt52KyRYIKoxM56mh-rzXe8mSMA--qKP2tY/edit#gid=0" width="800">載入中…</iframe></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/4Wv7Spos92I" width="500"></iframe> 小組報告</p>
<h2>W6 四人小組討論</h2>
<p></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/a5ObnE-uuPI" width="500"></iframe></p>
<p>討論結果 : 省力搬運機</p>
<p>動機: 在工地裡，經常需要用到台車搬運東西，例如裝著水泥的箱子，如果 是要靠人力搬運的話，不僅會造成工作效率的減少，也會使搬運人員 的體力大量消耗，所以討論過後，我們小組決定設計”省力搬運機”， 不僅解決搬運問題，也大幅地提高工作效率與人員體力的損耗。</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/lBvupDcRfts" width="560"></iframe></p>
<p><a href="https://www.youtube.com/watch?v=lBvupDcRfts">參考影片來源</a></p>
<h2>W7 省力搬運機構</h2>
<p><a href="https://40823220.github.io/cd2021/downloads/%E6%90%AC%E9%81%8B%E6%A9%9F.zip">搬運機.zip</a> 零件下載  使用inventer2018繪製</p>
<p>SolidWorks 模擬影片</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/-gkxtYH86YE" width="560"></iframe></p>
<p>cns 150-A-2.2</p>
<p><img alt="" height="295" src="/images/cns 150-A-2.2.png" width="525"/></p>
<p>CNS 3121-M2x12</p>
<p><img alt="" height="295" src="/images/CNS 3121-M2x12.png" width="525"/></p>
<p>CNS 3121-M2x12-2</p>
<p><img alt="" height="295" src="/images/CNS 3121-M2x12-2.png" width="525"/></p>
<p>CNS 3128-M2x0.4</p>
<p><img alt="" height="295" src="/images/CNS 3121-M2x12-2.png" width="525"/></p>
<p>支架</p>
<p><img alt="" height="295" src="/images/支架.png" width="525"/></p>
<p>底桿</p>
<p><img alt="" height="279" src="/images/底桿.PNG" width="525"/></p>
<p>後輪架</p>
<p><img alt="" height="295" src="/images/後輪架.png" width="525"/></p>
<p>側邊桿一號</p>
<p><img alt="" height="295" src="/images/側邊桿一號.png" width="525"/></p>
<p>側邊桿二號<img alt="" height="295" src="/images/側邊桿二號.png" width="525"/></p>
<p>側邊桿三號</p>
<p><img alt="" height="295" src="/images/側邊桿三號.png" width="525"/></p>
<p>側邊桿四號</p>
<p><img alt="" height="295" src="/images/側邊桿四號.png" width="525"/></p>
<p>連接桿</p>
<p><img alt="" height="295" src="/images/連接桿.png" width="525"/></p>
<p>握桿</p>
<p><img alt="" height="295" src="/images/握桿.png" width="525"/></p>
<p>普力桶</p>
<p><img alt="" height="295" src="/images/普力桶.png" width="525"/></p>
<p>鉚釘</p>
<p><img alt="" height="295" src="/images/鉚釘.png" width="525"/></p>
<p>輪子</p>
<p><img alt="" height="295" src="/images/輪子.png" width="525"/></p>
<p>輪子架</p>
<p><img alt="" height="295" src="/images/輪子架.png" width="525"/></p>
<h2>W8 程式模擬</h2>
<p>CoppliaSim 4.0 模擬</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/eK0nhj23s-Y" width="560"></iframe></p>
<p><span>問題:因使用CoppeliaSim模擬時，發現我們組合圖使用太多零件組合，導致爆炸後有70多個零件，我們已經盡力模擬，但零件太多很難察覺是哪個環節出現錯誤，所以小組討論後決定使用Inventor和solidworks進行模擬。</span></p>
<p><span>SolidWorks 2017 模擬</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/xQkyIcfL3Gg" width="560"></iframe></span></p>
<p>問題: 因為使用 CoppliaSim 模擬時，可能因為對程式不熟悉， 導致模擬失敗後，討論決定使用 SolidWorks 模擬之後，完成 省力搬運機模擬。</p>
<p>Inventor 2018 模擬</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/NwSqFHPQa9A" width="560"></iframe></p>
<p>問題: 這此不僅使用了 CoppliaSim 和 SolidWorks 進行模擬， 還用了 Inventor 進行模擬，不僅更完整演示本組專題，作動 方式與功能，更能體會到在不同軟體模擬可能出現的狀況。</p>
<p>使用 CoppeliaSim4.0 SolidWorks2017 Inventor 2018 模擬</p>
<h2>W9 個人心得</h2>
<p>本次的專題，是採取四人小組，較上次的兩人小組多了兩個 人，而此次的專題製作過程，讓我體會到四人小組較以往二 人小組的差別，過程中有好有壞，優點是做起事來，不僅更 加快速，能做的事情也更多了，而且遇到問題時，大家可以 互相討論，每個人的想法不同，也能看到更多不一樣的東西， 而缺點就是，因為組員增加了，所以在網站的維護方面，也 比較困難，所以小組必須要常常進行討論且共同維護網站， 接下來要進去八人小組，若工作分配得宜的話，肯定可以創 造更好的專題。</p>
<h2>應力分析</h2>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/UHU46HX0K4g" width="560"></iframe><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/A-b57v_UxR8" width="560"></iframe></p>
<p>這次不僅做了省力搬運機的作動模擬影片，還增加了該機構 主要承受力處零件的分析，由於此機構是在工地使用，為了 不造成工安意外或者是工具設計不良上導致種種問題，所以 應力分析固然重要。</p>
<p></p>
<p>使用 Inventor 2018 進行分析</p>
<p></p>
<h2>小組報告</h2>
<p><a href="https://drive.google.com/file/d/161wup0sdlnYtTcgYr0djx1WULFEW22HG/view?usp=sharing">PDF 檔案下載</a></p>
<p><img caption="false" height="574" src="/images/擷取.PNG" width="500"/></p>
<h1>Stage3 進度</h1>
<h2>W10 新增stage1、2工作分配</h2>
<h3>stage1</h3>
<p><span><strong>bg14</strong></span></p>
<p>專題主題:<b>升降平台</b></p>
<p><b>組員/分工:</b></p>
<p><b>40823228/成品零件繪製、模擬、報告影片</b></p>
<p><b>40823242/初稿零件繪製、模擬、報告影片</b></p>
<p><b></b></p>
<p><b>主題簡述:</b></p>
<p><b>在工地裡，經常需要在高處實施作業，可是 目前在外面看到的作業平台都是用組裝式 的，不僅延長工作時間，在搭建過程，也有 極大的掉落風險，所以我們小組設計出”油 壓式升降平台”，不僅方便攜帶，也大幅減 少風險與搭建平台的作業時間。</b></p>
<p><b>-</b></p>
<p><span><strong>bg24</strong></span></p>
<p><b>專題主題:升降裝置</b></p>
<p><b>組員/分工:</b></p>
<p><b>40823204/CoppeliaSim 測試、分組網站、PDF 製 作、reveal 簡報</b></p>
<p><b>40823220/繪圖(Inventor)、reveal 簡報</b></p>
<p><b></b></p>
<p><b>主題簡述:</b></p>
<p><b>方便搬運重物：大型可用來載人、小型可用在各 種自動化機械。</b></p>
<p><b>-</b></p>
<p><span><b>bg16</b></span></p>
<p><b>專題主題:氣動馬達</b></p>
<p><b>組員/分工:</b></p>
<p><b>40823221/<span>CoppeliaSim 模擬、PDF製作、合併倉儲及網站</span></b></p>
<p><b>40823237/<span>繪製圖檔、reveal製作、倉儲推送及維護</span></b></p>
<p><b></b></p>
<p><b>主題簡述:</b></p>
<p><b>因為對汽車作動原理有些許興趣，所以以引擎 的活塞與皮帶輪關係做變化。</b></p>
<h3>stage2</h3>
<p><span>bg12</span></p>
<p>專題主題:<span>自動門</span><span>開門機構</span></p>
<p>組員/分工:</p>
<p>40823221/<span>網頁編輯、程式模擬、PDF簡報製作</span></p>
<p>40823237/<span>繪製圖檔、程式模擬、Reveal製作</span></p>
<p>40823250/<span>繪製圖檔、網頁編輯</span></p>
<p>40832244/<span>網頁編輯</span></p>
<p><br/>主題簡述:</p>
<p>剛開始會想做項專題的原因是因為在去 年發生了全世界的病毒感染，所以我們 想過類似門或是其他需要人體接觸的地 方盡量能讓人不用用手碰觸。 後來會做此設計也有對接觸做設計，所 以我們將感應器裝在門的周圍，是他可 以自動開啟。</p>
<p>-</p>
<p><span>bg14</span></p>
<p>專題主題:<strong>省力搬運機</strong></p>
<p>組員/分工:</p>
<p>40823204/SolidWorks 零件繪製、模擬、報告影片</p>
<p>40823205/Inventor 零件繪製、模擬、報告影片</p>
<p>40823220/<span>Inventor 零件繪製、模擬、報告影片</span></p>
<p>40832228/<span>PDF 製作、模擬、報告影片</span></p>
<p><span>40823242/應力分析、模擬、報告影片</span></p>
<p><br/>主題簡述:</p>
<p>在工地裡,經常需要用到台車搬運東西,例如裝著水泥的箱子,如果是要靠人力搬運的話,不僅會造成工作效率的減少,也會使搬運人員的體力大量消耗,所以討論過後,我們小組決定設計”省力搬運機”,不僅解決搬運問題,也大幅地提高工作效率與人員體力的損耗。</p>
<h2>W11 專題動機、直播影片</h2>
<p>1.<strong>stage3主題:無障礙越野車</strong></p>
<p>2.動機:想要一台可以克服各種障礙地形的車子</p>
<p>3.繪圖者:40823220</p>
<p>4.機構:利用萬向接頭帶動蝸桿蝸輪</p>
<p>5.想法:前後輪用雙向馬達驅動，萬象接頭用單向馬達，材料採中空鋁件設計使整體更輕，上面設置供電器</p>
<p><img caption="false" height="246" src="/images/ｚ.png" width="500"/></p>
<p></p>
<p><img alt="" height="247" src="/images/ｔ.png" width="500"/></p>
<p></p>
<p><img alt="" height="244" src="/images/ｖ.png" width="500"/></p>
<p></p>
<p><img alt="" height="244" src="/images/ｇ.png" width="500"/></p>
<p></p>
<p><span>stage3-bg5-40823220 40823250</span><br/><span>主題:Task2、ipv4講解、作品的圖檔進度及講解和參考資料</span><br/><span>20號:圖檔說明</span><br/><span>50號:ipv4講解</span><br/><span>影片:</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/7dUx6LlgXMI" width="560"></iframe><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/T2CSmVCGPLk" width="560"></iframe></span></p>
<h2>W12 直播影片、專題修改</h2>
<p><span>stage3-bg5</span><br/><span>40823205、40823228</span><br/><span>主題 : 解決CMSIMDE版本錯誤</span></p>
<p><span>影片:</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/sm5dSwAz2Z4" width="560"></iframe></span></p>
<p><a href="https://40823220.github.io/cd2021/content/12.html">40823220網站</a></p>
<p>本週主要為零件、產品大改良</p>
<p>零件檔載點:<a href="https://40823220.github.io/cd2021/downloads/Desktop.rar">零件檔</a></p>
<p>更進如下:</p>
<p>1.輪胎加大，紋路朝前，為了讓摩擦力增加</p>
<p><img alt="" height="205" src="https://40823220.github.io/cd2021/images/798.bmp" width="400"/></p>
<p>2.將單向馬達架高，直接驅動蝸桿蝸輪，省略多餘的萬象接頭，使模擬更容易</p>
<p><img alt="" height="205" src="https://40823220.github.io/cd2021/images/789.bmp" width="400"/></p>
<p>3.輪軸加大，使模擬安插軸更容易</p>
<p>4.更改底板，因應前面所有改動，底板必須符合邏輯的變化</p>
<p><img alt="" height="205" src="https://40823220.github.io/cd2021/images/777.bmp" width="400"/></p>
<p>5.將不動零件合併化，原本14件縮減到6件，使模擬大幅度容易</p>
<h2>W13 程式控制攀爬機</h2>
<p>經過上周圖檔調整之後，減少零件數目，並可以順利使用CoppeliaSim模擬攀爬機運行。</p>
<p><a href="https://drive.google.com/file/d/1_5pztbJBCYs-A025o6BXO6uMZ4hCSncT/view?usp=sharing">檔案下載</a></p>
<p>模擬影片:</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/-IUVghi0gbQ" width="560"></iframe></p>
<p>線上同步討論</p>
<p>第一次</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/npptDs_cz78" width="560"></iframe></p>
<p>第二次</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/SOV4d6DmCEs" width="560"></iframe></p>
<h2>W14 機械手臂控制</h2>
<p>利用python程式啟動Robodk執行機械手臂取放圓球步驟</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/wYOaF-Ip7G8" width="560"></iframe></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false"># KMOLab Portable RoboDK pick and place
from robolink import *    # API to communicate with robodk
from robodk import *      # robodk robotics toolbox

# Setup global parameters
BALL_DIAMETER = 100 # diameter of one ball
APPROACH = 100      # approach distance to grab each part, in mm
nTCPs = 6           # number of TCP's in the tool

#----------------------------------------------
# Function definitions

def box_calc(BALLS_SIDE=4, BALLS_MAX=None):
    """Calculate a list of points (ball center) as if the balls were stored in a box"""
    if BALLS_MAX is None: BALLS_MAX = BALLS_SIDE**3
    xyz_list = []
    for h in range(BALLS_SIDE):
        for i in range(BALLS_SIDE):
            for j in range(BALLS_SIDE):
                xyz_list = xyz_list + [[(i+0.5)*BALL_DIAMETER, (j+0.5)*BALL_DIAMETER, (h+0.5)*BALL_DIAMETER]]
                if len(xyz_list) &gt;= BALLS_MAX:
                    return xyz_list
    return xyz_list

def pyramid_calc(BALLS_SIDE=4):
    """Calculate a list of points (ball center) as if the balls were place in a pyramid"""
    #the number of balls can be calculated as: int(BALLS_SIDE*(BALLS_SIDE+1)*(2*BALLS_SIDE+1)/6)
    BALL_DIAMETER = 100
    xyz_list = []
    sqrt2 = 2**(0.5)
    for h in range(BALLS_SIDE):
        for i in range(BALLS_SIDE-h):
            for j in range(BALLS_SIDE-h):
                height = h*BALL_DIAMETER/sqrt2 + BALL_DIAMETER/2
                xyz_list = xyz_list + [[i*BALL_DIAMETER + (h+1)*BALL_DIAMETER*0.5, j*BALL_DIAMETER + (h+1)*BALL_DIAMETER*0.5, height]]
    return xyz_list

def balls_setup(frame, positions):
    """Place a list of balls in a reference frame. The reference object (ball) must have been previously copied to the clipboard."""
    nballs = len(positions)
    step = 1.0/(nballs - 1)
    for i in range(nballs):
        newball = frame.Paste()
        newball.setName('ball ' + str(i)) #set item name
        newball.setPose(transl(positions[i])) #set item position with respect to parent
        newball.setVisible(True, False) #make item visible but hide the reference frame
        newball.Recolor([1-step*i, step*i, 0.2, 1]) #set RGBA color

def cleanup_balls(parentnodes):
    """Delete all child items whose name starts with \"ball\", from the provided list of parent items."""
    todelete = []
    for item in parentnodes:
        todelete = todelete + item.Childs()

    for item in todelete:
        if item.Name().startswith('ball'):
            item.Delete()

def TCP_On(toolitem, tcp_id):
    """Attach the closest object to the toolitem Htool pose,
    furthermore, it will output appropriate function calls on the generated robot program (call to TCP_On)"""
    toolitem.AttachClosest()
    toolitem.RDK().RunMessage('Set air valve %i on' % (tcp_id+1))
    toolitem.RDK().RunProgram('TCP_On(%i)' % (tcp_id+1));
        
def TCP_Off(toolitem, tcp_id, itemleave=0):
    """Detaches the closest object attached to the toolitem Htool pose,
    furthermore, it will output appropriate function calls on the generated robot program (call to TCP_Off)"""
    toolitem.DetachAll(itemleave)
    toolitem.RDK().RunMessage('Set air valve %i off' % (tcp_id+1))
    toolitem.RDK().RunProgram('TCP_Off(%i)' % (tcp_id+1));


#----------------------------------------------------------
# The program starts here:

# Any interaction with RoboDK must be done through RDK:
RDK = Robolink()

# Turn off automatic rendering (faster)
RDK.Render(False)

#RDK.Set_Simulation_Speed(500); # set the simulation speed

# Gather required items from the station tree
robot = RDK.Item('Fanuc M-710iC/50')
robot_tools = robot.Childs()
#robottool = RDK.Item('MainTool')
frame1 = RDK.Item('Table 1')
frame2 = RDK.Item('Table 2')

# Copy a ball as an object (same as CTRL+C)
ballref = RDK.Item('reference ball')
ballref.Copy()

# Run a pre-defined station program (in RoboDK) to replace the two tables
prog_reset = RDK.Item('Replace objects')
prog_reset.RunProgram()

# Call custom procedure to remove old objects
cleanup_balls([frame1, frame2])

# Make a list of positions to place the objects
frame1_list = pyramid_calc(4)
frame2_list = pyramid_calc(4)

# Programmatically place the objects with a custom-made procedure
balls_setup(frame1, frame1_list)

# Delete previously generated tools
for tool in robot_tools:
    if tool.Name().startswith('TCP'):
        tool.Delete()
        
# Calculate tool frames for the suction cup tool of 6 suction cups
TCP_list = []
for i in range(nTCPs):
    TCPi_pose = transl(0,0,100)*rotz((360/nTCPs)*i*pi/180)*transl(125,0,0)*roty(pi/2)
    TCPi = robot.AddTool(TCPi_pose, 'TCP %i' % (i+1))
    TCP_list.append(TCPi)

TCP_0 = TCP_list[0]

# Turn on automatic rendering
RDK.Render(True)

# Move balls    
robot.setPoseTool(TCP_list[0])
nballs_frame1 = len(frame1_list)
nballs_frame2 = len(frame2_list)
idTake = nballs_frame1 - 1
idLeave = 0
idTCP = 0
target_app_frame = transl(2*BALL_DIAMETER, 2*BALL_DIAMETER, 4*BALL_DIAMETER)*roty(pi)*transl(0,0,-APPROACH)

while idTake &gt;= 0:
    # ------------------------------------------------------------------
    # first priority: grab as many balls as possible
    # the tool is empty at this point, so take as many balls as possible (up to a maximum of 6 -&gt; nTCPs)
    ntake = min(nTCPs, idTake + 1)

    # approach to frame 1
    robot.setPoseFrame(frame1)
    robot.setPoseTool(TCP_0)
    robot.MoveJ([0,0,0,0,10,-200])
    robot.MoveJ(target_app_frame)

    # grab ntake balls from frame 1
    for i in range(ntake):
        TCPi = TCP_list[i]
        robot.setPoseTool(TCPi)
        # calculate target wrt frame1: rotation about Y is needed since Z and X axis are inverted
        target = transl(frame1_list[idTake])*roty(pi)*rotx(30*pi/180)
        target_app = target*transl(0,0,-APPROACH)
        idTake = idTake - 1        
        robot.MoveL(target_app)
        robot.MoveL(target)
        TCP_On(TCPi, i)
        robot.MoveL(target_app)
 
    # ------------------------------------------------------------------
    # second priority: unload the tool     
    # approach to frame 2 and place the tool balls into table 2
    robot.setPoseTool(TCP_0)
    robot.MoveJ(target_app_frame)
    robot.MoveJ([0,0,0,0,10,-200])
    robot.setPoseFrame(frame2)    
    robot.MoveJ(target_app_frame)
    for i in range(ntake):
        TCPi = TCP_list[i]
        robot.setPoseTool(TCPi)
        if idLeave &gt; nballs_frame2-1:
            raise Exception("No room left to place objects in Table 2")
        
        # calculate target wrt frame1: rotation of 180 about Y is needed since Z and X axis are inverted
        target = transl(frame2_list[idLeave])*roty(pi)*rotx(30*pi/180)
        target_app = target*transl(0,0,-APPROACH)
        idLeave = idLeave + 1        
        robot.MoveL(target_app)
        robot.MoveL(target)
        TCP_Off(TCPi, i, frame2)
        robot.MoveL(target_app)

    robot.MoveJ(target_app_frame)

# Move home when the robot finishes
robot.MoveJ([0,0,0,0,10,-200])
</pre>
<p></p>
<h2>w15 直播影片</h2>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/mDPnTY_19A0" width="560"></iframe></p>
<p>開會討論出新增地形，讓使用者可自行創作地形提供攀爬機攀爬。</p>
<h2>w16 操作方式</h2>
<p>檔案來源 <a href="https://40823204.github.io/cd2021/content/coppeliasim.html">40823204</a> </p>
<p><span>python remote api 控制 更新</span></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/VkEcGY76lNA" width="560"></iframe></p>
<p><strong>按鍵指令</strong></p>
<p>"1-4"控制輪子轉彎方向</p>
<p>"w" 蝸桿蝸輪控制車體向上</p>
<p>"d"<span>蝸桿蝸輪控制車體向下</span></p>
<p>"a"車子向前</p>
<p><span>"d"車子向前後</span></p>
<h1>問題</h1>
<h2>缺少Python.exe (3.9.1) 啟動時所對應呼叫的特定 Windows 系統 dll 檔案</h2>
<p><span>Python.exe (3.9.1) 啟動時所對應呼叫的特定 Windows 系統 dll 檔案, 無法正確連結, 但具體原因或處理方法可能要再深入查找</span></p>
<p><span>最後的解決方法: <span style="color: #993300;">電腦重灌 </span></span></p>
<h2>CMSIMDE版本錯誤</h2>
<p><span>進入倉儲 =&gt; Fork</span></p>
<p><span><img alt="" height="225" src="/images/C1.jpg" width="400"/></span></p>
<p><span>會出現</span></p>
<p><span><img alt="" height="225" src="/images/C2.jpg" width="400"/></span></p>
<p><span>之後進入C的tmp底下 git clone -- recurse-submodule 網址 .git 3202</span></p>
<p><span><img alt="" height="225" src="/images/C3.jpg" width="400"/></span></p>
<p><span>然後到隨身碟C槽底下，確認是否clone完成</span></p>
<p><span><img alt="" height="225" src="/images/C4.jpg" width="400"/></span></p>
<p><span>完成之後，因為cmsimde目前是錯誤的版本，所以必須知道最新的版次號，進入老師的倉儲</span></p>
<p><span><img alt="" height="225" src="/images/C5.jpg" width="400"/></span></p>
<p><span>找到最近一次cmsimde的版本</span></p>
<p><span><img alt="" height="225" src="/images/C6.jpg" width="400"/></span></p>
<p><span>複製版次號的前7瑪</span></p>
<p><span><img alt="" height="225" src="/images/C7.jpg" width="400"/></span></p>
<p><span>進入cmsimde</span></p>
<p><span><img alt="" height="225" src="/images/C8.jpg" width="400"/></span></p>
<p><span>卻發現是空的</span></p>
<p><span><img alt="" height="225" src="/images/C9.jpg" width="400"/></span></p>
<p><span>開啟黑窗 進入3202的cmsimde裡面 git checkout 版次碼前7碼<img alt="" height="225" src="/images/C10.jpg" width="400"/></span></p>
<p><span>之後就推送上</span><span>去</span></p>
<p><span><img alt="" height="225" src="/images/C11.jpg" width="400"/></span></p>
<p><span>進入倉儲 =&gt; pull request</span></p>
<p><span><img alt="" height="225" src="/images/C12.jpg" width="400"/></span></p>
<p><span>進入之後要推送資料</span></p>
<p><span><img alt="" height="225" src="/images/C13.jpg" width="400"/></span></p>
<p><span>出現</span></p>
<p><span><img alt="" height="225" src="/images/C14.jpg" width="400"/></span></p>
<p><span>完成新增 正確版本cmsimde的pull request，之後只要上去抓下來即可</span></p>
<p><span><img alt="" height="225" src="/images/C15.jpg" width="400"/></span></p>
<h1>課程筆記</h1>
<p><img caption="false" height="409" src="/images/筆記.png" width="400"/></p>
<h1>Task1</h1>
<p><a href="https://40823251.github.io/cd2021/content/W10%20%E5%B0%8F%E7%B5%84task1.html">參考資料 40823251網站</a>內容</p>
<p><a href="https://drive.google.com/drive/folders/1ESznNYddvCMJvsB1Fh18aWIOVo-d29oK?usp=sharing">stage3-2b.txt</a> 檔案下載</p>
<p><a href="http://github.com/40823245/stage3-bg1">stage3-bg1 repo</a> | <a href="http://40823251.github.io/stage3-bg1">stage3-bg1 site</a> | <a href="http://github.com/40823245/cd2021">40823245 repo</a> | <a href="http://40823245.github.io/cd2021">40823245 site</a> | <a href="http://github.com/40823251/cd2021">40823251 repo</a> | <a href="http://40823251.github.io/cd2021">40823251 site</a> | <a href="http://github.com/40823208/cd2021">40823208 repo</a> | <a href="http://40823208.github.io/cd2021">40823208 site</a> | <a href="http://github.com/40823213/cd2021">40823213 repo</a> | <a href="http://40823213.github.io/cd2021">40823213 site</a> | <a href="http://github.com/40823232/cd2021">40823232 repo</a> | <a href="http://40823232.github.io/cd2021">40823232 site</a> | <a href="http://github.com/40823234/cd2021">40823234 repo</a> | <a href="http://40823234.github.io/cd2021">40823234 site</a> | <a href="http://github.com/40823235/cd2021">40823235 repo</a> | <a href="http://40823235.github.io/cd2021">40823235 site</a> | <a href="http://github.com/40823246/cd2021">40823246 repo</a>| <a href="http://40823246.github.io/cd2021">40823246 site</a><br/>----------<br/><a href="http://github.com/40823217/stage3-bg2">stage3-bg2 repo</a> | <a href="http://40823201.github.io/stage3-bg2">stage3-bg2 site</a> | <a href="http://github.com/40823217/cd2021">40823217 repo</a> | <a href="http://40823217.github.io/cd2021">40823217 site</a> | <a href="http://github.com/40823201/cd2021">40823201 repo</a> | <a href="http://40823201.github.io/cd2021">40823201 site</a> | <a href="http://github.com/40823209/cd2021">40823209 repo</a> | <a href="http://40823209.github.io/cd2021">40823209 site</a> | <a href="http://github.com/40823210/cd2021">40823210 repo</a> | <a href="http://40823210.github.io/cd2021">40823210 site</a> | <a href="http://github.com/40823206/cd2021">40823206 repo</a> | <a href="http://40823206.github.io/cd2021">40823206 site</a> | <a href="http://github.com/40823207/cd2021">40823207 repo</a> | <a href="http://40823207.github.io/cd2021">40823207 site</a> | <a href="http://github.com/40823223/cd2021">40823223 repo</a> | <a href="http://40823223.github.io/cd2021">40823223 site</a> | <a href="http://github.com/40823224/cd2021">40823224 repo</a>| <a href="http://40823224.github.io/cd2021">40823224 site</a><br/>----------<br/><a href="http://github.com/40823236/stage3-bg3">stage3-bg3 repo</a> | <a href="http://40823202.github.io/stage3-bg3">stage3-bg3 site</a> | <a href="http://github.com/40823236/cd2021">40823236 repo</a> | <a href="http://40823236.github.io/cd2021">40823236 site</a> | <a href="http://github.com/40823202/cd2021">40823202 repo</a> | <a href="http://40823202.github.io/cd2021">40823202 site</a> | <a href="http://github.com/40823203/cd2021">40823203 repo</a> | <a href="http://40823203.github.io/cd2021">40823203 site</a> | <a href="http://github.com/40823212/cd2021">40823212 repo</a> | <a href="http://40823212.github.io/cd2021">40823212 site</a> | <a href="http://github.com/40823219/cd2021">40823219 repo</a> | <a href="http://40823219.github.io/cd2021">40823219 site</a> | <a href="http://github.com/40823222/cd2021">40823222 repo</a> | <a href="http://40823222.github.io/cd2021">40823222 site</a> | <a href="http://github.com/40823231-2/cd2021">40823231-2 repo</a> | <a href="http://40823231-2.github.io/cd2021">40823231-2 site</a> | <a href="http://github.com/40823244/cd2021">40823244 repo</a>| <a href="http://40823244.github.io/cd2021">40823244 site</a><br/>----------<br/><a href="http://github.com/40823239/stage3-bg4">stage3-bg4 repo</a> | <a href="http://s40723140.github.io/stage3-bg4">stage3-bg4 site</a> | <a href="http://github.com/40823239/cd2021">40823239 repo</a> | <a href="http://40823239.github.io/cd2021">40823239 site</a> | <a href="http://github.com/s40723140/cd2021">s40723140 repo</a> | <a href="http://s40723140.github.io/cd2021">s40723140 site</a> | <a href="http://github.com/s40723128/cd2021">s40723128 repo</a> | <a href="http://s40723128.github.io/cd2021">s40723128 site</a> | <a href="http://github.com/s40723139/cd2021">s40723139 repo</a> | <a href="http://s40723139.github.io/cd2021">s40723139 site</a> | <a href="http://github.com/s40723106/cd2021">s40723106 repo</a> | <a href="http://s40723106.github.io/cd2021">s40723106 site</a> | <a href="http://github.com/s40723135/cd2021">s40723135 repo</a> | <a href="http://s40723135.github.io/cd2021">s40723135 site</a> | <a href="http://github.com/s40723143/cd2021">s40723143 repo</a> | <a href="http://s40723143.github.io/cd2021">s40723143 site</a> | <a href="http://github.com/s40723215/cd2021">s40723215 repo</a>| <a href="http://s40723215.github.io/cd2021">s40723215 site</a><br/>----------<br/><a href="http://github.com/40823221/stage3-bg5">stage3-bg5 repo</a> | <a href="http://40823204.github.io/stage3-bg5">stage3-bg5 site</a> | <a href="http://github.com/40823221/cd2021">40823221 repo</a> | <a href="http://40823221.github.io/cd2021">40823221 site</a> | <a href="http://github.com/40823204/cd2021">40823204 repo</a> | <a href="http://40823204.github.io/cd2021">40823204 site</a> | <a href="http://github.com/40823205/cd2021">40823205 repo</a> | <a href="http://40823205.github.io/cd2021">40823205 site</a> | <a href="http://github.com/40823220/cd2021">40823220 repo</a> | <a href="http://40823220.github.io/cd2021">40823220 site</a> | <a href="http://github.com/40823228/cd2021">40823228 repo</a> | <a href="http://40823228.github.io/cd2021">40823228 site</a> | <a href="http://github.com/40823237/cd2021">40823237 repo</a> | <a href="http://40823237.github.io/cd2021">40823237 site</a> | <a href="http://github.com/40823242/cd2021">40823242 repo</a> | <a href="http://40823242.github.io/cd2021">40823242 site</a> | <a href="http://github.com/40823250/cd2021">40823250 repo</a>| <a href="http://40823250.github.io/cd2021">40823250 site</a> | <a href="http://github.com/40832244/cd2021">40832244 repo</a>| <a href="http://40832244.github.io/cd2021">40832244 site</a><br/>----------<br/><a href="http://github.com/40823225/stage3-bg6">stage3-bg6 repo</a> | <a href="http://40823214.github.io/stage3-bg6">stage3-bg6 site</a> | <a href="http://github.com/40823225/cd2021">40823225 repo</a> | <a href="http://40823225.github.io/cd2021">40823225 site</a> | <a href="http://github.com/40823214/cd2021">40823214 repo</a> | <a href="http://40823214.github.io/cd2021">40823214 site</a> | <a href="http://github.com/40823218/cd2021">40823218 repo</a> | <a href="http://40823218.github.io/cd2021">40823218 site</a> | <a href="http://github.com/40823211/cd2021">40823211 repo</a> | <a href="http://40823211.github.io/cd2021">40823211 site</a> | <a href="http://github.com/40823248/cd2021">40823248 repo</a> | <a href="http://40823248.github.io/cd2021">40823248 site</a> | <a href="http://github.com/40823247/cd2021">40823247 repo</a> | <a href="http://40823247.github.io/cd2021">40823247 site</a> | <a href="http://github.com/40823216/cd2021">40823216 repo</a> | <a href="http://40823216.github.io/cd2021">40823216 site</a> | <a href="http://github.com/40823238/cd2021">40823238 repo</a>| <a href="http://40823238.github.io/cd2021">40823238 site</a><br/>----------<br/><a href="http://github.com/40623144/stage3-bg7">stage3-bg7 repo</a> | <a href="http://40823233.github.io/stage3-bg7">stage3-bg7 site</a> | <a href="http://github.com/40623144/cd2021">40623144 repo</a> | <a href="http://40623144.github.io/cd2021">40623144 site</a> | <a href="http://github.com/40823233/cd2021">40823233 repo</a> | <a href="http://40823233.github.io/cd2021">40823233 site</a> | <a href="http://github.com/s40723224/cd2021">s40723224 repo</a> | <a href="http://s40723224.github.io/cd2021">s40723224 site</a> | <a href="http://github.com/40823241/cd2021">40823241 repo</a> | <a href="http://40823241.github.io/cd2021">40823241 site</a> | <a href="http://github.com/40423155/cd2021">40423155 repo</a> | <a href="http://40423155.github.io/cd2021">40423155 site</a> | <a href="http://github.com/40823227/cd2021">40823227 repo</a> | <a href="http://40823227.github.io/cd2021">40823227 site</a> | <a href="http://github.com/s40723233/cd2021">s40723233 repo</a> | <a href="http://s40723233.github.io/cd2021">s40723233 site</a></p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">def stu2b(account):
    if account == "40823231":
        return account + "-2"
    elif account[0:3] == "407":
        return "s" + account
    else:
        return account
  
teamb = []
  
# open file, default is read mode, since txt content no chinese char
# no encoding = "UTF-8" is needed
with open("stage3_2b.txt") as fh:
    # readlines will read into the whole line and put into list format
    # has \n at the end of each line
    data = fh.readlines()
#print(len(data))
for i in range(len(data)):
    group = data[i].rstrip("\n").split("\t")
    teamb.append(group)
      
output = ""    
seperator = "-"*10 + "&lt;br /&gt;"
  
for i in teamb[0:]:
    team = i[0]
    leader = stu2b(i[1])
    m1 = stu2b(i[3])
    m2 = stu2b(i[5])
    m3 = stu2b(i[7])
    m4 = stu2b(i[9])
    m5 = stu2b(i[11])
    m6 = stu2b(i[13])
      
    try:
        m7 = stu2b(i[15])
    except:
        m7 = ""
    try:
        m8 = stu2b(i[17])
    except:
        m8 = ""
          
    leaderrepo = "&lt;a href='http://github.com/" + leader + "/cd2021'&gt;" + leader + " repo&lt;/a&gt;"
    leadersite = "&lt;a href='http://" + leader + ".github.io/cd2021'&gt;" + leader +  " site&lt;/a&gt;"
    m1repo = "&lt;a href='http://github.com/" + m1 + "/cd2021'&gt;" + m1 + " repo&lt;/a&gt;"
    m1site = "&lt;a href='http://" + m1 + ".github.io/cd2021'&gt;" + m1 +  " site&lt;/a&gt;"
    m2repo = "&lt;a href='http://github.com/" + m2 + "/cd2021'&gt;" + m2 + " repo&lt;/a&gt;"
    m2site = "&lt;a href='http://" + m2 + ".github.io/cd2021'&gt;" + m2 +  " site&lt;/a&gt;"
    m3repo = "&lt;a href='http://github.com/" + m3 + "/cd2021'&gt;" + m3 + " repo&lt;/a&gt;"
    m3site = "&lt;a href='http://" + m3 + ".github.io/cd2021'&gt;" + m3 +  " site&lt;/a&gt;"
    m4repo = "&lt;a href='http://github.com/" + m4 + "/cd2021'&gt;" + m4 + " repo&lt;/a&gt;"
    m4site = "&lt;a href='http://" + m4 + ".github.io/cd2021'&gt;" + m4 +  " site&lt;/a&gt;"
    m5repo = "&lt;a href='http://github.com/" + m5 + "/cd2021'&gt;" + m5 + " repo&lt;/a&gt;"
    m5site = "&lt;a href='http://" + m5 + ".github.io/cd2021'&gt;" + m5 +  " site&lt;/a&gt;"
    m6repo = "&lt;a href='http://github.com/" + m6 + "/cd2021'&gt;" + m6 + " repo&lt;/a&gt;"
    m6site = "&lt;a href='http://" + m6 + ".github.io/cd2021'&gt;" + m6 +  " site&lt;/a&gt;"
   
  
    teamrepo = "&lt;a href='http://github.com/" + leader + "/" + team + "'&gt;" + team + " repo&lt;/a&gt;"
    teamsite =  "&lt;a href='http://" + m1 + ".github.io/" + team + "'&gt;" + team +  " site&lt;/a&gt;"
  
    output += teamrepo + " | " + teamsite + " | " +leaderrepo + " | " + leadersite + " | " +m1repo + " | " + m1site + " | " +m2repo + " | " + m2site + " | " +m3repo + " | " + m3site + " | " +m4repo + " | " + m4site + " | " +m5repo + " | " + m5site + " | " +m6repo + " | " + m6site 
      
    if m7 != "":
       m7repo = "&lt;a href='http://github.com/" + m7 + "/cd2021'&gt;" + m7 + " repo&lt;/a&gt;"
       m7site = "&lt;a href='http://" + m7 + ".github.io/cd2021'&gt;" + m7 +  " site&lt;/a&gt;"   
       output += " |  " + m7repo + "| " + m7site
    else:
        output += "" 
      
    if m8 != "":
       m8repo = "&lt;a href='http://github.com/" + m8 + "/cd2021'&gt;" + m8 + " repo&lt;/a&gt;"
       m8site = "&lt;a href='http://" + m8 + ".github.io/cd2021'&gt;" + m8 +  " site&lt;/a&gt;"   
       output += " |  " + m8repo + "| " + m8site + "&lt;br /&gt;" + seperator
    else:
        output += "&lt;br /&gt;" + seperator
  
  
print(output)
# the following will use group data to generate needed html
</pre>
<p><br/><br/></p>
<p></p>
<h1>Task2</h1>
<h2>stage1</h2>
<p>進入CoppeliaSim模擬之後，也許是設定的問題，導致無法順利作動，目前正在排除。</p>
<p><span>模擬影片:</span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/uYUyLcT0Sws" width="560"></iframe></p>
<p><a href="https://drive.google.com/file/d/1RZYQYqdfZG5YEP4QCfSpfCCJ0iXPQ_l5/view?usp=sharing">模擬檔案下載</a></p>
<p>模擬影片2:</p>
<p>stage-bg16</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/Ua9zBclBMPY" width="560"></iframe></p>
<p>stage-bg24</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/861JHEgRNk0" width="560"></iframe></p>
<h2>stage2</h2>
<p><span>stage2-bg12</span></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/MsF1WQpAa04" width="560"></iframe></p>
<p><span>stage2-bg14</span></p>
<p><span>控制方式:上下控制角度 左右控制前後</span></p>
<p><span><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/H0m3scUj7iM" width="560"></iframe></span></p>
<h2>stage3</h2>
<p>專題題目:攀爬機</p>
<p>控制方式:</p>
<p>QA上下 Z停止<br/>WS後輪正反轉 X停止<br/>ED前輪正反轉 C停止</p>
<p>前正後反 左轉<br/>前反後正 右轉</p>
<p>模擬影片:</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/-IUVghi0gbQ" width="560"></iframe></p>
<p><a href="https://drive.google.com/file/d/1wCz8iFQfx_OH9ey3Od8rozNq0cZKqlql/view?usp=sharing">模擬檔案下載</a></p>
<p></p>
<h1>Task3</h1>
<h1>W16</h1>
<p>W16 exam <a href="https://drive.google.com/file/d/1vHH4IYVt42KXmYx4Q4ezM3JljKFly4JW/view?usp=sharing">檔案下載</a></p>
<h4>1. Onshape 零組件繪製<span> </span></h4>
<p>零件繪製過程  <a href="https://youtu.be/gC4CtrGMzL8">Onshape檔案連結</a></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/gC4CtrGMzL8" width="560"></iframe></p>
<h4>2. 建立 CoppeliaSim 4.1.0 MTB robot 場景</h4>
<p><a href="https://drive.google.com/file/d/1vHH4IYVt42KXmYx4Q4ezM3JljKFly4JW/view?usp=sharing">檔案下載</a></p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/K_G285CS8xU" width="560"></iframe><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/1i2gq5thR4s" width="560"></iframe>程式:</p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init()
    joint01=sim.getObjectHandle('joint1')
    joint02=sim.getObjectHandle('joint2')
    joint03=sim.getObjectHandle('joint3')
    jointz=sim.getObjectHandle('jointz')
    sim.setJointTargetPosition(joint01,0)
    sim.setJointTargetPosition(joint02,0)
    sim.setJointTargetPosition(joint03,0)
    sim.setJointTargetPosition(jointz,0)
    deg1=0
    deg2=0
    deg3=0
end

function sysCall_actuation()
    message,auxiliaryData=sim.getSimulatorMessage()
    while message~=-1 do
        if (message==sim.message_keypress) then
            if (auxiliaryData[1]==2009) then
            deg1=deg1+1
            deg3=deg2-deg1
            sim.setJointTargetPosition(joint01,deg1*math.pi/180)
            end
            if (auxiliaryData[1]==2010) then
            deg1=deg1-1
            deg3=deg2-deg1
            sim.setJointTargetPosition(joint01,deg1*math.pi/180)
            end
            if (auxiliaryData[1]==2007) then
            deg2=deg2+1
            deg3=deg1-deg2
            sim.setJointTargetPosition(joint02,deg2*math.pi/180)
            end
            if (auxiliaryData[1]==2008) then
            deg2=deg2-1
            deg3=deg1-deg2
            sim.setJointTargetPosition(joint02,deg2*math.pi/180)
            end
            if (auxiliaryData[1]==115) then
                   sim.setJointTargetPosition(jointz,-0.02)
                   sim.setIntegerSignal('pad_switch',1)
                end
            if (auxiliaryData[1]==119) then
                   sim.setJointTargetPosition(jointz,0)
                end
            if (auxiliaryData[1]==32) then
                   sim.setIntegerSignal('pad_switch',0)
                end
        end
    message,auxiliaryData=sim.getSimulatorMessage()
    end        
end

function sysCall_sensing()
    -- put your sensing code here
end

function sysCall_cleanup()
    -- do some clean-up here


-- See the user manual or the available code snippets for additional callback functions and details
   end</pre>
<h4>3. 手臂末端加入 components-gripper-suction pad 吸盤</h4>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/B48UXHyOQNI" width="560"></iframe>程式:</p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function sysCall_init() 
    --this is teach by 40823214
    objectHandle=sim.getObjectHandle('suctionPad')
    sim.setUserParameter(objectHandle,'@enable','')
    modelBase=sim.getObjectAssociatedWithScript(sim.handle_self)
    robotBase=modelBase
    while true do
        robotBase=sim.getObjectParent(robotBase)
        if robotBase==-1 then
            robotName='Dobot'
            break
        end
        robotName=sim.getObjectName(robotBase)
        suffix,suffixlessName=sim.getNameSuffix(robotName)
        if suffixlessName=='Dobot' then
            break
        end
    end

    s=sim.getObjectHandle('suctionPadSensor')
    l=sim.getObjectHandle('suctionPadLoopClosureDummy1')
    l2=sim.getObjectHandle('suctionPadLoopClosureDummy2')
    b=sim.getObjectHandle('suctionPad')
    suctionPadLink=sim.getObjectHandle('suctionPadLink')
    local gripperBase=sim.getObjectAssociatedWithScript(sim.handle_self)

    infiniteStrength=sim.getScriptSimulationParameter(sim.handle_self,'infiniteStrength')
    maxPullForce=sim.getScriptSimulationParameter(sim.handle_self,'maxPullForce')
    maxShearForce=sim.getScriptSimulationParameter(sim.handle_self,'maxShearForce')
    maxPeelTorque=sim.getScriptSimulationParameter(sim.handle_self,'maxPeelTorque')

    sim.setLinkDummy(l,-1)
    sim.setObjectParent(l,b,true)
    m=sim.getObjectMatrix(l2,-1)
    sim.setObjectMatrix(l,-1,m)
end

function sysCall_cleanup() 
    --this is teach by 40823214
    sim.setLinkDummy(l,-1)
    sim.setObjectParent(l,b,true)
    m=sim.getObjectMatrix(l2,-1)
    sim.setObjectMatrix(l,-1,m)
end 

function sysCall_sensing() 
    parent=sim.getObjectParent(l)
    --this is teach by 40823214
    local sig=sim.getIntegerSignal("pad_switch")
    if (not sig) or (sig==0) then
        if (parent~=b) then
            sim.setLinkDummy(l,-1)
            sim.setObjectParent(l,b,true)
            m=sim.getObjectMatrix(l2,-1)
            sim.setObjectMatrix(l,-1,m)
        end
    else
        if (parent==b) then
            index=0
            while true do
                shape=sim.getObjects(index,sim.object_shape_type)
                if (shape==-1) then
                    break
                end
                local res,val=sim.getObjectInt32Parameter(shape,sim.shapeintparam_respondable)
                if (shape~=b) and (val~=0) and (sim.checkProximitySensor(s,shape)==1) then
                    -- Ok, we found a respondable shape that was detected
                    -- We connect to that shape:
                    -- Make sure the two dummies are initially coincident:
                    sim.setObjectParent(l,b,true)
                    m=sim.getObjectMatrix(l2,-1)
                    sim.setObjectMatrix(l,-1,m)
                    -- Do the connection:
                    sim.setObjectParent(l,shape,true)
                    sim.setLinkDummy(l,l2)
                    break
                end
                index=index+1
            end
        else
            -- Here we have an object attached
            if (infiniteStrength==false) then
                -- We might have to conditionally beak it apart!
                result,force,torque=sim.readForceSensor(suctionPadLink) -- Here we read the median value out of 5 values (check the force sensor prop. dialog)
                if (result&gt;0) then
                    breakIt=false
                    if (force[3]&gt;maxPullForce) then breakIt=true end
                    sf=math.sqrt(force[1]*force[1]+force[2]*force[2])
                    if (sf&gt;maxShearForce) then breakIt=true end
                    if (torque[1]&gt;maxPeelTorque) then breakIt=true end
                    if (torque[2]&gt;maxPeelTorque) then breakIt=true end
                    if (breakIt) then
                        -- We break the link:
                        sim.setLinkDummy(l,-1)
                        sim.setObjectParent(l,b,true)
                        m=sim.getObjectMatrix(l2,-1)
                        sim.setObjectMatrix(l,-1,m)
                    end
                end
            end
        end
    end
end 
--by 40823214</pre>
<p>由 <a href="https://www.youtube.com/watch?v=gZd9KlVS9BI">40823214</a> 林厚宇教學</p>
<h4>4. 逆向運動學函式</h4>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/qejBlwCraiU" width="560"></iframe>程式:</p>
<pre class="brush:lua;auto-links:false;toolbar:false" contenteditable="false">function moving(x,y)
    a=0.4
    b=0.4
    c=math.pow((math.pow(x,2)+math.pow(y,2)),0.5)
    s=(a+b+c)/2
    area=math.pow((s*(s-a)*(s-b)*(s-c)),0.5)
    h=area/(2*c)
    deg1_base=math.atan(x/y)
    if x&lt;0 and y&lt;0 then
        deg1_base=deg1_base+math.pi
    end
    deg1_tri=math.asin(h/a)
    deg1=deg1_base+deg1_tri
    deg2=math.pi-(0.5*math.pi-deg1_tri)-math.acos(h/b)
    deg3=deg2-deg1
    sim.setJointTargetPosition(joint01,deg1)
    sim.setJointTargetPosition(joint02,-deg2)
    sim.setJointTargetPosition(joint03,deg3)
end


function sysCall_threadmain()
    joint01=sim.getObjectHandle('joint1')
    joint02=sim.getObjectHandle('joint2')
    joint03=sim.getObjectHandle('joint3')
    jointz=sim.getObjectHandle('jointz')
    sim.setJointTargetPosition(joint01,0)
    sim.setJointTargetPosition(joint02,0)
    sim.setJointTargetPosition(joint03,0)
    sim.setJointTargetPosition(jointz,0)
    sim.setIntegerSignal("pad_switch",1)
    sim.setJointTargetPosition(jointz,-0.02)
    sim.wait(5)
    sim.setJointTargetPosition(jointz,0)
    while sim.getSimulationState()~=sim.simulation_advancing_abouttostopre do
    moving(0.2,0.7)
    sim.wait(5)
    sim.setIntegerSignal("pad_switch",0)
    sim.wait(5)
    sim.setIntegerSignal("pad_switch",1)
    sim.setJointTargetPosition(jointz,-0.1)
    sim.wait(5)
    sim.setJointTargetPosition(jointz,0)
    sim.wait(5)
    moving(-0.3,-0.55)
    sim.wait(2)
    sim.setIntegerSignal("pad_switch",0)
    sim.wait(5)
    sim.setIntegerSignal("pad_switch",1)
    sim.setJointTargetPosition(jointz,-0.1)
    sim.wait(5)
    sim.setJointTargetPosition(jointz,0)
    sim.wait(5)
    end

end

function sysCall_cleanup()
    -- Put some clean-up code here
end

-- See the user manual or the available code snippets for additional callback functions and details
</pre>
<h4>5. Python remote API 逆向運動學函式</h4>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/paSHZF8h5NQ" width="560"></iframe>程式:</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">import sim as vrep
import math
import random
import time
import math


print ('Start')
 
vrep.simxFinish(-1)
 
clientID = vrep.simxStart('127.0.0.1', 19997, True, True, 5000, 5)
  
if clientID != -1:
    print ('Connected to remote API server')
      
    res = vrep.simxAddStatusbarMessage(
        clientID, "This is teach by 40823214",
        vrep.simx_opmode_oneshot)
    if res not in (vrep.simx_return_ok, vrep.simx_return_novalue_flag):
        print("Could not add a message to the status bar.")
  
     
    opmode = vrep.simx_opmode_oneshot_wait
    STREAMING = vrep.simx_opmode_streaming 
  
     
    vrep.simxStartSimulation(clientID, opmode)
    ret,joint01=vrep.simxGetObjectHandle(clientID,"joint1",opmode)
    ret,joint02=vrep.simxGetObjectHandle(clientID,"joint2",opmode)
    ret,joint03=vrep.simxGetObjectHandle(clientID,"joint3",opmode)
    ret,jointz=vrep.simxGetObjectHandle(clientID,"jointz",opmode)
       
    vrep.simxSetJointTargetPosition(clientID,joint01,0,opmode)
    vrep.simxSetJointTargetPosition(clientID,joint02,0,opmode)
    vrep.simxSetJointTargetPosition(clientID,joint03,0,opmode)
    vrep.simxSetIntegerSignal(clientID,"pad_switch",1,opmode)
    vrep.simxSetJointTargetPosition(clientID,jointz,-0.015,opmode)
    time. sleep(1)
    vrep.simxSetJointTargetPosition(clientID,jointz,0,opmode)</pre>
<p>心得感想</p>
<p>很感謝40823214林厚宇，花費許多時間來教導大家關於CoppeliaSim及相關程式基礎，如果沒有他的話，我應該很難完成這項任務，而在進行任務的同時，我也學到了很多，也對程式跟CoppeliaSim更加熟悉了解了。</p>
<h1>w17</h1>
<p>期末個人簡介報告</p>
<p><iframe allowfullscreen="allowfullscreen" height="314" src="//www.youtube.com/embed/YMPo-TndqeA" width="560"></iframe></p>
<h1>課程心得</h1>
<p>經過本學期的課程，讓我學習到了許多，不僅是在專題設計上或是在CoppeliaSim的操作上，也讓我體會到了協同產品設計並非字面上那樣簡單，其中包括了團隊分工，而真正困難的點是一個團隊不是只有一個人，必須兼顧和採納組員的感受及想法，如果大家都能替團隊設想，那肯定可以創造非常有價值性的東西，另外，程式的部分，也讓我了解到自己欠缺了甚麼能力，也就是當你看到介面全部都是英文時，而自己卻不知該如何下手，只能依靠網路上的字典翻譯找尋答案，所以接下來，我會繼續精進自己的能力，並更努力學習，創造自我價值。</p>